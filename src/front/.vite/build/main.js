"use strict";const e=require("electron"),o=require("path"),r=require("better-sqlite3");function i(){const n=o.join(__dirname,"../db/","database.sqlite");console.log(n);const t=r(o.join(__dirname,"/db/","database.sqlite"),{verbose:console.log,fileMustExist:!0});return t.pragma("foreign_keys = ON"),t}async function c(){const n=i(),a=n.prepare("SELECT * FROM users").all();return n.close(),a}require("electron-squirrel-startup")&&e.app.quit();const s=()=>{const n=new e.BrowserWindow({width:800,height:600,webPreferences:{preload:o.join(__dirname,"preload.js")}});n.loadURL("http://localhost:5173"),n.webContents.openDevTools()};e.app.on("ready",s);e.app.on("window-all-closed",()=>{process.platform!=="darwin"&&e.app.quit()});e.app.whenReady().then(()=>{e.ipcMain.handle("db:getUsers",async()=>await c())});e.app.on("activate",()=>{e.BrowserWindow.getAllWindows().length===0&&s()});
